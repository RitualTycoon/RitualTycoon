<html>
<head>
	<title></title>
	<meta content="">
	<style></style>
<!-- 	<script type="text/javascript"	src="./src/lib/jquery-1.8.2.min.js"></script> -->
	<script type="text/javascript"	src="./sugar-1.3.9.min.js"></script>
	<script type="text/javascript"	src="./engine.js"></script>
	
</head>
<body>
	<canvas id="canvas" width="300" height="200" ></canvas>
	<script type="text/javascript">
		var canvas = document.getElementById('canvas');
		if(canvas.getContext('2d')) {
			// Eleminates the strange "input" cursor, at least in chrome and firefox
			canvas.addEventListener('mousedown', function(evt) {
				evt.preventDefault();
				evt.stopPropagation();
			}, false);
			
// 			ge.src_path = './';
// 			
// 			ge.Module.define('main').requires('game')
// 			.init(function() {
// 			});
// 			
// 			ge.Module.onReady(function() {
// 				console.log('Test');
// 			});

			var nextid = 0;
// 			
// 			function IdentClass() {}
// 			IdentClass.prototype	= new ge.Class;
// 			IdentClass.extend		= function ext(prop) {
// 				prop.id			= nextid++;
// 				var Class		= ge.Class.extend.bind(this)(prop);
// 				Class.id		= prop.id;
// 				Class.extend	= ext;
// 				return Class;
// 			}
			
			var a = ge.Class.extend({
				test:	'hello',
				
				init:	function() {
// 					console.log('init');
				}
			});
// 			var old = a.extend;
			a.extend = function ext(prop) {
				prop.id			= nextid++;
				var Class		= ge.Class.extend.bind(this)(prop);
				Class.id		= prop.id;
				Class.extend	= ext;
				return Class;
			}
			
			var b = a.extend({
			});
			var c = b.extend({
				init:	function() {
// 					console.log('init c');
				}
			});
			
			new c;
			console.log(a.id);
			console.log(b.id);
			console.log(c.id);
			console.log('---');
			console.log((new b()).id);
			console.log((new c()).id);
			
			// ---

			function EventSystem() {
				this._handlers = [];
			}
			EventSystem.prototype = {
				reg:		function(event, handler) {},
				unreg:		function(handler) {},
				trigger:	function(event) {},
			};
			
			function Entity() {
				this.components = [];
			}
			Entity.prototype = new EventSystem;
			Entity.prototype.addComp		= function() {};
			
// 			Entity.prototype.addComp

// 			function Entity() {
// 				this.val = 5;
// 			}
// 			Entity.prototype.addComp = function() {
// 			};
// 			
// 			var e = new Entity();
// 			console.log(e.val);
// 			e.addComp();
// 			console.log(e.val);
		}
	</script>
</body>
</html>